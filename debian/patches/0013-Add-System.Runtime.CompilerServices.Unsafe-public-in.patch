From: =?utf-8?b?0KjQu9GL0LrQvtCyINCS0LDRgdC40LvQuNC5?= <vash@lab50.net>
Date: Thu, 4 Mar 2021 12:19:20 +0300
Subject: Add System.Runtime.CompilerServices.Unsafe public in mscorlib

---
 mcs/class/corlib/System.Runtime.CompilerServices/Unsafe.cs | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

Index: mono/mcs/class/corlib/System.Runtime.CompilerServices/Unsafe.cs
===================================================================
--- mono.orig/mcs/class/corlib/System.Runtime.CompilerServices/Unsafe.cs
+++ mono/mcs/class/corlib/System.Runtime.CompilerServices/Unsafe.cs
@@ -36,7 +36,7 @@ using nint = System.Int32;
 
 namespace System.Runtime.CompilerServices
 {
-	unsafe static partial class Unsafe
+	unsafe public static partial class Unsafe
 	{
 		public static ref T Add<T> (ref T source, int elementOffset)
 		{
Index: mono/mcs/class/Makefile
===================================================================
--- mono.orig/mcs/class/Makefile
+++ mono/mcs/class/Makefile
@@ -384,7 +384,6 @@ net_4_x_parallel_dirs = \
 	System.Reflection.Context \
 	Mono.Profiler.Log	\
 	Mono.Runtime.Tests	\
-	System.Runtime.CompilerServices.Unsafe \
 	SystemWebTestShim \
 	$(xbuild_4_0_dirs)
 
Index: mono/mcs/class/Mono.Debugger.Soft/Makefile
===================================================================
--- mono.orig/mcs/class/Mono.Debugger.Soft/Makefile
+++ mono/mcs/class/Mono.Debugger.Soft/Makefile
@@ -31,7 +31,7 @@ $(test_output_dir)/dtest-excfilter.exe:
 	$(ILASM) -out:$@ /exe /debug Test/dtest-excfilter.il
 
 $(test_output_dir)/dtest-app.exe: Test/dtest-app.cs $(TEST_HELPERS_SOURCES) | $(test_output_dir)
-	$(CSCOMPILE) -r:$(topdir)/class/lib/$(PROFILE)/mscorlib.dll -r:$(topdir)/class/lib/$(PROFILE)/System.Core.dll -r:$(topdir)/class/lib/$(PROFILE)/System.dll -r:$(topdir)/class/lib/$(PROFILE)/System.Runtime.CompilerServices.Unsafe.dll -sourcelink:Test/sourcelink.json -out:$@ -unsafe $(PLATFORM_DEBUG_FLAGS) -optimize- Test/dtest-app.cs $(TEST_HELPERS_SOURCES)
+	$(CSCOMPILE) -r:$(topdir)/class/lib/$(PROFILE)/mscorlib.dll -r:$(topdir)/class/lib/$(PROFILE)/System.Core.dll -r:$(topdir)/class/lib/$(PROFILE)/System.dll -sourcelink:Test/sourcelink.json -out:$@ -unsafe $(PLATFORM_DEBUG_FLAGS) -optimize- Test/dtest-app.cs $(TEST_HELPERS_SOURCES)
 
 TEST_HELPERS_SOURCES = \
 	../test-helpers/NetworkHelpers.cs \
