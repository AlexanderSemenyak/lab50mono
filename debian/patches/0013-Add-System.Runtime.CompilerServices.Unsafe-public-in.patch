From: =?utf-8?b?0KjQu9GL0LrQvtCyINCS0LDRgdC40LvQuNC5?= <vash@lab50.net>
Date: Thu, 4 Mar 2021 12:19:20 +0300
Subject: Add System.Runtime.CompilerServices.Unsafe public in mscorlib

---
 mcs/class/Makefile                                         | 1 -
 mcs/class/Mono.Debugger.Soft/Makefile                      | 2 +-
 mcs/class/corlib/System.Runtime.CompilerServices/Unsafe.cs | 2 +-
 3 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/mcs/class/Makefile b/mcs/class/Makefile
index 41fea7f..1869e6b 100644
--- a/mcs/class/Makefile
+++ b/mcs/class/Makefile
@@ -384,7 +384,6 @@ net_4_x_parallel_dirs = \
 	System.Reflection.Context \
 	Mono.Profiler.Log	\
 	Mono.Runtime.Tests	\
-	System.Runtime.CompilerServices.Unsafe \
 	SystemWebTestShim \
 	$(xbuild_4_0_dirs)
 
diff --git a/mcs/class/Mono.Debugger.Soft/Makefile b/mcs/class/Mono.Debugger.Soft/Makefile
index e5b67d2..82ab4b8 100644
--- a/mcs/class/Mono.Debugger.Soft/Makefile
+++ b/mcs/class/Mono.Debugger.Soft/Makefile
@@ -31,7 +31,7 @@ $(test_output_dir)/dtest-excfilter.exe: Test/dtest-excfilter.il | $(test_output_
 	$(ILASM) -out:$@ /exe /debug Test/dtest-excfilter.il
 
 $(test_output_dir)/dtest-app.exe: Test/dtest-app.cs $(TEST_HELPERS_SOURCES) | $(test_output_dir)
-	$(CSCOMPILE) -r:$(topdir)/class/lib/$(PROFILE)/mscorlib.dll -r:$(topdir)/class/lib/$(PROFILE)/System.Core.dll -r:$(topdir)/class/lib/$(PROFILE)/System.dll -r:$(topdir)/class/lib/$(PROFILE)/System.Runtime.CompilerServices.Unsafe.dll -sourcelink:Test/sourcelink.json -out:$@ -unsafe $(PLATFORM_DEBUG_FLAGS) -optimize- Test/dtest-app.cs $(TEST_HELPERS_SOURCES)
+	$(CSCOMPILE) -r:$(topdir)/class/lib/$(PROFILE)/mscorlib.dll -r:$(topdir)/class/lib/$(PROFILE)/System.Core.dll -r:$(topdir)/class/lib/$(PROFILE)/System.dll -sourcelink:Test/sourcelink.json -out:$@ -unsafe $(PLATFORM_DEBUG_FLAGS) -optimize- Test/dtest-app.cs $(TEST_HELPERS_SOURCES)
 
 TEST_HELPERS_SOURCES = \
 	../test-helpers/NetworkHelpers.cs \
diff --git a/mcs/class/corlib/System.Runtime.CompilerServices/Unsafe.cs b/mcs/class/corlib/System.Runtime.CompilerServices/Unsafe.cs
index 318bf29..1c68120 100644
--- a/mcs/class/corlib/System.Runtime.CompilerServices/Unsafe.cs
+++ b/mcs/class/corlib/System.Runtime.CompilerServices/Unsafe.cs
@@ -36,7 +36,7 @@
 
 namespace System.Runtime.CompilerServices
 {
-	unsafe static partial class Unsafe
+	unsafe public static partial class Unsafe
 	{
 		public static ref T Add<T> (ref T source, int elementOffset)
 		{
